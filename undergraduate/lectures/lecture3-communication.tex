% Included from both -slides and -handout versions.
\documentclass[pdftex]{beamer} % used to trigger beamer mode in Emacs,
                               % normally commented out.

\usetheme{metropolis}

\usepackage[english]{babel}
\usepackage[latin1]{inputenc}
\usepackage{graphicx}
\usepackage{times}
\usepackage[T1]{fontenc}
\usepackage{fancyvrb}
\usepackage{listings}
\begin{document}
\lstset{language=C, escapeinside={(*@}{@*)}, numbers=left,
  basicstyle=\tiny, showspaces=false, showtabs=false}

\title{Introduction to Operating Systems}
\subtitle{Through tracing, analysis, and experimentation}
%\institute{University of Cambridge}
\author{George V. Neville-Neil}
%\author{Dr Robert N. M. Watson}
\date{1 August 2016}

\begin{frame}
  \titlepage
\end{frame}

\section{Communcation}
\label{sec:communication}

\section{Inter-Process Communication}
\label{sec:ipc}

\begin{frame}
  \frametitle{Goals of IPC}
  \begin{itemize}
  \item Data Sharing
  \item Signaling events
  \item Control of multiple processes
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Mechanisms}
  \begin{itemize}
  \item Shared files
  \item Semaphores and Mutexes
  \item Signals
  \item Sockets
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{History}
  \begin{itemize}
  \item 
  \item 
  \item 
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Relationship to Networking}
  \begin{itemize}
  \item Extension of mechanisms across machines
  \item Everything is a byte stream
  \item No record boundaries
  \item File like API
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Signals}
  \begin{itemize}
  \item Based on hardware interrupt model
  \item Not useful for data transfer
  \item Catch and process
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Singal Handling}
  \begin{itemize}
  \item Source raises a signal
  \item destination catches the signal 
  \item Uncaught signals cause a program to exit
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Available Signals}
  \begin{tabular}
  |Name|Meaning|
  \hline
  |SIGHUP	|terminal line hangup|
     2	   |SIGINT	terminate process    interrupt program|
  | SIGQUIT	create core image    quit program|
  |SIGILL	create core image    illegal instruction|
  |SIGTRAP	create core image    trace trap|
     6	   SIGABRT	create core image    abort program (formerly SIGIOT)|
     7	   SIGEMT	create core image    emulate instruction executed|
     8	   SIGFPE	create core image    floating-point exception|
     9	   SIGKILL	terminate process    kill program|
     10	   SIGBUS	create core image    bus error|
     11	   SIGSEGV	create core image    segmentation violation|
     12	   SIGSYS	create core image    non-existent system call invoked|
     13	   SIGPIPE	terminate process    write on a	pipe with no reader|
     14	   SIGALRM	terminate process    real-time timer expired|
     15	   SIGTERM	terminate process    software termination signal|
     16	   SIGURG	discard	signal	     urgent condition present on  socket|
     17	   SIGSTOP	stop process	     stop (cannot be caught or ignored)|
     18	   SIGTSTP	stop process	     stop signal generated from  keyboard|
     19	   SIGCONT	discard	signal	     continue after stop|
     20	   SIGCHLD	discard	signal	     child status has changed|
     21	   SIGTTIN	stop process	     background	read attempted from control terminal|
     22	   SIGTTOU	stop process	     background	write attempted	to control terminal|
     23	   SIGIO	discard	signal	     I/O is possible on	a descriptor|
     24	   SIGXCPU	terminate process    cpu time limit exceeded|
     25	   SIGXFSZ	terminate process    file size limit exceeded|
     26	   SIGVTALRM	terminate process    virtual time alarm|
     27	   SIGPROF	terminate process    profiling timer alarm|
     28	   SIGWINCH	discard	signal	     Window size change|
     29	   SIGINFO	discard	signal	     status request from keyboard|
     30	   SIGUSR1	terminate process    User defined signal 1|
     31	   SIGUSR2	terminate process    User defined signal 2|
     32	   SIGTHR	terminate process    thread interrupt
     33	   SIGLIBRT	terminate process    real-time library interrupt|
  \end{tabular}
\end{frame}

\begin{frame}
  \frametitle{Pipes}
  \begin{itemize}
  \item Easliest bulk data IPC
  \item Key innovation of UNIX systems
  \item Depends on file descriptors
  \item \emph{STDIN} \emph{STDOUT} \emph{STDERR}
 \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Pipe Implementation}
  \begin{itemize}
  \item 
  \item 
  \item 
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{}
  \begin{itemize}
  \item 
  \item 
  \item 
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{}
  \begin{itemize}
  \item 
  \item 
  \item 
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{}
  \begin{itemize}
  \item 
  \item 
  \item 
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{}
  \begin{itemize}
  \item 
  \item 
  \item 
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{}
  \begin{itemize}
  \item 
  \item 
  \item 
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{}
  \begin{itemize}
  \item 
  \item 
  \item 
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{}
  \begin{itemize}
  \item 
  \item 
  \item 
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{}
  \begin{itemize}
  \item 
  \item 
  \item 
  \end{itemize}
\end{frame}


\section{Internetworked Communication}
\label{sec:internet}

begin{frame}
  \frametitle{Networking and FreeBSD}
  \begin{itemize}
  \item Everyone's TCP/IP Stack
  \item IPv4, IPv6, UDP, TCP, SCTP
  \item Various drivers
  \item Multiple firewalls
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{The User Program View}
  \begin{itemize}
  \item User programs use sockets
  \item Network programs follow UNIX model
  \item Flexible interfaces for different protocols
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Sockets}
  \begin{itemize}
  \item Main programmer interface to networking
  \item Generic API
  \item Attempts to support read/write semantics
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Looking Directly at Sockets}
\begin{verbatim}
# Count sockets by family

# Count sockets by type

# Count sockets by protocol
\end{verbatim}  
\end{frame}

\begin{frame}
  \frametitle{Network Lab (Sockets Exercises)}
  \begin{itemize}
  \item Count socket calls by domain, type and protocol
  \item Show programs accepting connections
  \item Show programs initiating connections
  \item Write a D script to trace a single socket with the test program
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{Network Stack}
\end{frame}

\begin{frame}
  \frametitle{Network Stack Overview}
\centering
\includegraphics{../figures/tcpipstack}
\end{frame}

\begin{frame}
\centering
  \frametitle{Inbound Layer Transitions}
\includegraphics[width=0.5\textwidth]{../figures/inbound}
\end{frame}

\begin{frame}[fragile]
  \frametitle{UDP}
  \begin{itemize}
  \item Simplest transport protocol
  \item No states to maintain
  \item Data is sent immediately
  \item Supports multicast
  \item Only probes are \verb+send+ and \verb+receive+
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{UDP Send and Receive}
  \begin{itemize}
  \item \verb|udptrack|
  \end{itemize}
\end{frame}

\begin{frame}
  \frametitle{TCP}
  \begin{itemize}
  \item Transmission Control Protocol
  \item Stream based
  \item In order delivery
  \item Maintains the illusion of a byte stream
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{TCP Connections}
  \begin{itemize}
  \item \verb|tcpconn|
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{TCP State Machine}
  \begin{itemize}
  \item \verb|tcpstate|
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Tracking More of TCP}
  \begin{itemize}
  \item \verb|tcptrack|
  \end{itemize}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Network Protocol Lab Exercises}
  \begin{itemize}
  \item Add IP source and destination information to \verb+tcpstate+
  \item Add support for \verb+send+ and \verb+receive+ calls to \verb+tcptrack+
  \item Show the congestion window for a single connection over time
  \end{itemize}
\end{frame}

\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "lecture3-communication"
%%% End:
